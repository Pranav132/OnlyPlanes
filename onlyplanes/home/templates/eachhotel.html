{% extends "layout.html" %}
{% load static %}

{% block links %}
<link rel="stylesheet" href="{% static 'css/hotel-page.css' %}">
<link type="text/css" rel="stylesheet" href="{% static 'css/lighslider.css' %}" /> 
{% endblock %}

{% block title %}
{{hotel.name}}
{% endblock %}

{% block content %}
<div class="container">
   <div class="card-container">
        <div class="image-area" style = "background: url({{hotel.exterior_picture.url}})  no-repeat center #e8e8e8;">
        </div>
        <div class="text-area">
            <div class="heading-area">
                <h2>{{hotel.name}}</h2>
                <h4>{{hotel.category}}</h4>
            </div>

                <p class="paragraph-area">
                    {{hotel.description}}
                </p>

                
                <div class="ratings">
                   <span>
                    {% for i in '01234'|make_list %}
                        {% if forloop.counter <= hotel.starrating %}
                            <i class="bi bi-star-fill" style = "color: orange; text-shadow: 2px 2px 2px #000;font-size:1em;"></i>
                        {% else %}
                            <i class="bi bi-star-fill" style = "text-shadow: 2px 2px 2px #000;font-size:1em;"></i>
                        {% endif %}
                    {% endfor %}
                   </span>
                </div>
            <div class="price-and-buy">
                <h2 class="price-1">{{hotel.detailed_address}}</h2>
            </div>
        </div>
    </div>
    
</div>

<div class = "cardwrapper">  
    <div class="blog-card">
        <div class="meta">
          <div class="photo" style="background-image: url({{hotel.cheaproom_picture.url}})"></div>
        </div>
        <div class="description">
          <h1>{{hotel.cheaproom_name}}</h1>
          <h2>₹ {{rooms.2.price}} / night</h2>
          <p style = "text-decoration: underline;"><strong>Amenities</strong></p>
          <p> <span>
            {{rooms.2.amenities.all|first}}
            {% for amenity in rooms.2.amenities.all %}
              {% if forloop.counter != 1 %}
              , {{amenity}}
              {% endif %}
            {% endfor %}
        </span></p>
          <p class="read-more">
            <a href="#">Book</a>
          </p>
        </div>
      </div>
      <div class="blog-card alt">
        <div class="meta">
          <div class="photo" style="background-image: url({{hotel.mediumroom_picture.url}})"></div>
        </div>
        <div class="description">
          <h1>{{hotel.middleroom_name}}</h1>
          <h2>₹ {{rooms.1.price}} / night</h2>
          <p style = "text-decoration: underline;"><strong>Amenities</strong></p>
          <p> <span>
            {{rooms.1.amenities.all|first}}
            {% for amenity in rooms.1.amenities.all %}
              {% if forloop.counter != 1 %}
              , {{amenity}}
              {% endif %}
            {% endfor %}
        </span></p>
          <p class="read-more">
            <a href="#">Book</a>
          </p>
        </div>
      </div>
      <div class="blog-card">
        <div class="meta">
          <div class="photo" style="background-image: url({{hotel.expensiveroom_picture.url}})"></div>
        </div>
        <div class="description">
          <h1>{{hotel.expensiveroom_name}}</h1>
          <h2>₹ {{rooms.0.price}} / night</h2>
          <p style = "text-decoration: underline;"><strong>Amenities</strong></p>
          <p> <span>
            {{rooms.0.amenities.all|first}}
            {% for amenity in rooms.0.amenities.all %}
              {% if forloop.counter != 1 %}
              , {{amenity}}
              {% endif %}
            {% endfor %}
        </span></p>
          <p class="read-more">
            <a href="#">Book</a>
          </p>
        </div>
      </div>
    </div>

    <!-- carousel -->
<div class="reco-wrapper">
  <h1 class = "reco-title"> Recommended Hotels</h1>
  <section class = "slider">
  <ul id="autoWidth" class="cs-hidden" style = " height: 100vh;">
  {% for recommend in hotel_reccos %}
  <li>
  <div class="box">
      <!-- image -->
      <div class="slide-img">
          <img src = "{{ recommend.exterior_picture.url }}" alt = "{{recommend.name}}">
      </div>

      <!-- overlay -->
      <div class="overlay">
          <a href = "{% url 'eachhotel' hotel_id=recommend.id %}" class = "buy-btn">View</a>
      </div>

      <!-- Details -->
      <div class="detail-box">
          <!-- Name-->
          <div class="type">
              <a href = "#">{{ recommend.name }}</a>
          </div>
          <!--price -->
          <a href = "#" class="price">{{ recommend.location }}</a>
      </div>
  </div>
  </li>
  {% endfor %}
</ul>
  </section>
</div>






{% if ratings %}
<div class="allratings">
{% for rating in ratings %}
<!-- first the stars
then user name
then if there is description, description -->
<br>
<div class="rates">
<div class="stars">
{% for i in checker %}
  {% if forloop.counter0 < rating.rating %}
  <span class="fa fa-star" style="color: orange;"></span>
{% else %}
  <span class="fa fa-star"></span>
{% endif %}
{% endfor %}
</div>
<div class="username">{{rating.user}}</div>
{% if rating.review %}
  <div class = "review">{{rating.review}}</div>
  
{% endif %}
<div class="delete">
{% if user == rating.user %}
  <i class="bi bi-trash-fill" onclick="togglePopup('{{rating.id}}')"></i>
{% endif %}
</div>
</div>

<br>

{% endfor %}
</div>
{% else %}
<div class = "noreviews"><div class="rates" style="font-size:2em; font-family:'Poppins', sans-serif; font-weight:bold; display:flex; justify-content:center; align-items:center; padding-top:5vh;">No reviews yet, be the first to write a review!</a></div></div>
{% endif %}

<div class="write">
</div>

{% for rating in ratings %}
<section class = "popup" id = "{{rating.id}}">
  <div class = overlay></div>
  <div class="content">
      <div class="close-btn" onclick="togglePopup('{{rating.id}}')">&times;</div>
      <div class="text">
          Are you sure you want to delete this review?
      </div>
      <div class="form">
          <form method = "POST" >
              {% csrf_token %}
              <input type="hidden" name="product_id" value="{{product.id}}" />
              <input type = "submit" value = "Delete" class = "submitbutton" onclick = "alert('Review deleted successfully')" />
          </form>
      </div>
  </div>
</section>
{% endfor%}

<script>
  function togglePopup(idname)
  {
      document.getElementById(idname).classList.toggle("active");
  }
</script>


{% endblock %}